var streamingSVGParser=(()=>{var A=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var d=A((Q,m)=>{var D="A".charCodeAt(0),L="z".charCodeAt(0),v=/\s/;m.exports=function(e,n,i){let r=1,l,f,h,T,a,u;return n===void 0&&(n=Function.prototype),i?S:M;function S(s){return new Promise(o=>I(s,0,o))}function I(s,o,c){let B=performance.now(),R=0;for(;o<s.length;)if(b(s[o]),o+=1,R+=1,R>3e4&&performance.now()-B>32){setTimeout(()=>I(s,o,c),0);return}c()}function M(s){return W(s,0)}function W(s,o){let c=0;for(;o<s.length;)b(s[o]),o+=1}function b(s){switch(r){case 1:s==="<"?r=2:u&&u.push(s);break;case 6:s===">"&&(r=1);break;case 2:s==="!"||s==="?"?(a=[s],r=5):s==="/"?(u&&(T.innerText=u.join(""),u=null),n(T),T&&(T=T.parent),r=6,u=null):(r=3,a=[s]);break;case 5:{a.push(s);let o=a.length;a.length>3&&a[o-1]===">"&&a[o-2]==="-"&&a[o-3]==="-"?(r=1,u=null):(a[0]==="!"&&a.length>1&&a[1]!=="-"||a[0]==="?")&&(r=6);break}case 3:{if(E(s))a.push(s);else if(s!=="/"){f=a.join(""),r=7;let o=T;T={tagName:f,attributes:new Map,parent:o,children:[]},o&&o.children.push(T),s===">"&&_()}break}case 4:{if(E(s))a.push(s);else if(s===">"){let o=a.join("");if(o!==f)throw new Error("Expected "+f+" to be closed, but got "+o)}break}case 7:{s===">"?_():E(s)?(a=[s],r=8):a.push(s);break}case 8:{E(s)?a.push(s):(h=a.join(""),s==="="?r=10:s===">"?(T.attributes.set(h,!0),_()):r=11);break}case 11:{s==="="?r=10:E(s)?(r=8,T.attributes.set(a.join(""),!0),a=[s]):s===">"&&(T.attributes.set(a.join(""),!0),_());break}case 10:{(s==='"'||s==="'"||!F(s))&&(a=[],r=9,l=s);break}case 9:{s===l?(r=7,T.attributes.set(h,a.join("")),h=null,a=[]):a.push(s);break}}}function _(){let s=a.length;e(T),s>0&&a[s-1]==="/"&&(n(T),T&&(T=T.parent)),r=1,u=[],h=null}};function E(t){let e=t.charCodeAt(0);return D<=e&&e<=L||t==="_"||t==="-"||t===":"}function F(t){return v.test(t)}});var p=A((Y,N)=>{var P={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},g=class{constructor(){this.value=0,this.fractionValue=0,this.divider=1,this.exponent=0,this.isNegative=!1,this.hasValue=!1,this.hasFraction=!1,this.hasExponent=!1}getValue(){let e=this.value;return this.hasFraction&&(e+=this.fractionValue/this.divider),this.hasExponent&&(e*=Math.pow(10,this.exponent)),this.isNegative?-e:e}reset(){this.value=0,this.fractionValue=0,this.divider=1,this.exponent=0,this.isNegative=!1,this.hasValue=!1,this.hasFraction=!1,this.hasExponent=!1}addCharacter(e){if(this.hasValue=!0,e==="-"){this.isNegative=!0;return}if(e==="."){if(this.hasFraction)throw new Error("Already has fractional part!");this.hasFraction=!0;return}if(e==="e"){if(this.hasExponent)throw new Error("Already has exponent");this.hasExponent=!0,this.exponent=0;return}let n=P[e];if(n===void 0)throw new Error("Not a digit: "+e);this.hasExponent?this.exponent=this.exponent*10+n:this.hasFraction?(this.fractionValue=this.fractionValue*10+n,this.divider*=10):this.value=this.value*10+n}};N.exports=g});var x=A(($,O)=>{var k=p(),C={M(t,e){if(e.length%2!==0)throw new Error("Expected an even number of numbers for M command");if(t.length===0)for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);else throw new Error('Only one "Move" command per path is expected')},m(t,e){let n=0,i=0;if(t.length>0&&e.length>1){let r=t[t.length-1];n=r[0]+e[0],i=r[1]+e[1]}for(let r=2;r<e.length;r+=2){let l=n+e[r],f=i+e[r+1];t.push([l,f]),n=l,i=f}},L(t,e){for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]])},l(t,e){let n=0,i=0;if(t.length>0){let r=t[t.length-1];n=r[0],i=r[1]}for(let r=0;r<e.length;r+=2){let l=n+e[r],f=i+e[r+1];t.push([l,f]),n=l,i=f}},H(t,e){let n=0;t.length>0&&(n=t[t.length-1][1]);for(let i=0;i<e.length;i+=1){let r=e[i];t.push([r,n])}},h(t,e){let n=0,i=0;t.length>0&&(i=t[t.length-1][0],n=t[t.length-1][1]);for(let r=0;r<e.length;r+=1){let l=i+e[r];t.push([l,n]),i=l}},V(t,e){let n=0;t.length>0&&(n=t[t.length-1][0]);for(let i=0;i<e.length;i+=1)t.push([n,e[i]])},v(t,e){let n=0,i=0;t.length>0&&(i=t[t.length-1][0],n=t[t.length-1][1]);for(let r=0;r<e.length;r+=1){let l=n+e[r];t.push([i,l]),n=l}}};function V(t){let e=new k,n=0,i=t.length,r,l,f,h=[];for(;n<i;)r=t[n],r in C?(e.hasValue&&l.push(e.getValue()),e.reset(),l&&f(h,l),f=C[r],l=[]):r===" "||r===","?e.hasValue&&(l.push(e.getValue()),e.reset()):r==="Z"||r==="z"||(e.hasValue&&r==="-"&&(l.push(e.getValue()),e.reset()),e.addCharacter(r)),n+=1;return e.hasValue&&l.push(e.getValue()),l&&f(h,l),h}O.exports=V});var U=A((ee,w)=>{w.exports=function(e){return j(e.attributes.get("fill")||e.attributes.get("style"))};function j(t){if(t[0]==="#"){if(t.length===1+6){let i=Number.parseInt(t.substr(1,2),16),r=Number.parseInt(t.substr(3,2),16),l=Number.parseInt(t.substr(5,2),16);return[i,r,l]}if(t.length===1+3||t.length===1+4){let i=t.substr(1,1),r=t.substr(2,1),l=t.substr(3,1),f=Number.parseInt(i+i,16),h=Number.parseInt(r+r,16),T=Number.parseInt(l+l,16);return[f,h,T]}throw new Error("Cannot parse this color yet "+t)}else if(t.startsWith("rgba")){let i=t.substr(5).split(/,/).map(r=>Number.parseFloat(r));return i[3]=Math.round(i[3]*255),i}let e=t.match(/fill:rgb\((.+?)\)/),n;if(e&&(n=e[1].split(",").map(i=>Number.parseInt(i,10)).filter(q)),n||(e=t.match(/fill:#([0-9a-fA-F]{6})/),e&&(n=[Number.parseInt(e[1].substr(0,2),16),Number.parseInt(e[1].substr(2,2),16),Number.parseInt(e[1].substr(4,2),16)])),!n&&(e=t.match(/fill:#([0-9a-fA-F]{3})/),e)){let i=e[1].substr(0,1),r=e[1].substr(1,1),l=e[1].substr(2,1);n=[Number.parseInt(i+i,16),Number.parseInt(r+r,16),Number.parseInt(l+l,16)]}if(n){if(n.length!==3)throw new Error("Cannot parse this color yet "+t);return n}throw console.error("Cannot parse this color yet "+t),new Error("Cannot parse this color yet "+t)}function q(t){return Number.isFinite(t)}});var Z=A((te,G)=>{var y=d(),X=x(),z=p(),H=U();G.exports={createStreamingSVGParser:y,getPointsFromPathData:X,NumberParser:z,getElementFillColor:H}});return Z();})();
//# sourceMappingURL=streaming-svg-parser.min.js.map
